<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Realtime Database</title>
    <!-- Firebase App (Core) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <!-- Firebase Realtime Database -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
</head>
<body>
    <h1>Firebase Realtime Database Example</h1>
    <button onclick="writeData()">Write Data</button>
    <button onclick="readData()">Read Data</button>
    <button onclick="updateData()">Update Data</button>
    <button onclick="deleteData()">Delete Data</button>

    <script>
        // **1. Firebase Configuration**
        const firebaseConfig = {
          apiKey: "AIzaSyBb2-D3G0xvbMepV1RtFCawFMbQpVaplj4",
          authDomain: "test-efac0.firebaseapp.com",
          databaseURL: "https://test-efac0-default-rtdb.firebaseio.com", 
          projectId: "test-efac0",
          storageBucket: "test-efac0.appspot.com",  // Fixed storageBucket
          messagingSenderId: "281809758982",
          appId: "1:281809758982:web:470e75aeebfc659bf74c87",
          measurementId: "G-M4C9K5211J"
      };

        // **2. Initialize Firebase**
        firebase.initializeApp(firebaseConfig);

        // **3. Reference the Database**
        const database = firebase.database();
        const usersRef = database.ref('users');

        // **4. Write Data**
        function writeData() {
            usersRef.child("user1").set({
                name: "Eyob",
                age: 16,
                city: "Addis Ababa"
            }).then(() => console.log("Data Written"))
              .catch(error => console.error("Error:", error));
        }

        // **5. Read Data**
        function readData() {
           usersRef.child("user1").once("value")
              .then(snapshot => {
                 const userData = snapshot.val();
                 console.log("User Data:", JSON.stringify(userData, null, 2));  // Pretty print JSON
                  console.table(userData); // Display in table format
           })
         .catch(error => console.error("Error:", error));
       }

        // **6. Update Data**
        function updateData() {
            usersRef.child("user1").update({
                age: 17
            }).then(() => console.log("Data Updated"))
              .catch(error => console.error("Error:", error));
        }

        // **7. Delete Data**
        function deleteData() {
            usersRef.child("user1").remove()
                .then(() => console.log("Data Deleted"))
                .catch(error => console.error("Error:", error));
        }
    </script>
</body>
</html>